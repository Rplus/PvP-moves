<script>
  // import PM from './PM.html';
  import { dex, defaultDex, datalist, pokemon, moves } from './stores.js';
  import { saveItem, getItem, toJSON } from './u.js';


  let _dex = defaultDex;
  let dexInput;
  // let pms = [];
  // let pm;

  // DEBUG
  let btn;
  window.xx = () => {
    console.log({
      pms,
    });
  };
  setTimeout(() => {
    // btn.click();
  }, 100);

  function addPm() {
    let _dex = +dexInput.value;
    let pmData = $pokemon.find(pm => pm.dex === _dex);
    if (!pmData) {
      console.error(`Wrong Dex: ${_dex}`);
      // TODO: will be array
      $dex = defaultDex;
    }
    console.log($dex);
    // $dex.set(_dex);
    // pms = pms.concat(pmData).slice(-2);
    // console.log(pmData);
    // pm = pmData;
  }
</script>

<label for="pm-name-selector">Choose a pm:</label>
<input
  list="pm-names"
  id="pm-name-selector"
  name="pm-name-selector"
  bind:value="{$dex}"
  bind:this={dexInput}
/>
<button on:click={ addPm } bind:this={btn}>+</button>

<datalist id="pm-names">
  {@html $datalist }
</datalist>

<hr>

<style>
</style>
