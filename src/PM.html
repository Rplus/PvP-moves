<script>
import Moveset from './Moveset.html';
import CP from './CP.html';
import { calPmCP, calPmWOWCP, copy } from './u.js';
import { dex, pokemon } from './stores.js';

$: pm = $pokemon.find(pm => pm.dex === +$dex);

</script>



{#if pm}
  <section class="pm-section L1-box">
    <header class="pm-info card">
      <div class="df mb-4 mt-4">
        <span class="pm-name">{pm.name}</span>
        <small class="pm-dex">#{pm.dex}</small>

        <div class="pm-types df">
          {#each pm.types as type}
            <div class="pm-type type-icon" data-type={type} title={type}></div>
          {/each}
        </div>

        <div class="pm-stats">
          <div class="base" data-base="a">{pm.baseStats.atk}</div>
          <div class="base" data-base="d">{pm.baseStats.def}</div>
          <div class="base" data-base="s">{pm.baseStats.sta}</div>
        </div>
      </div>

      <div class="mb-5">
        <CP ads={pm.baseStats} />
      </div>
    </header>

    <Moveset pm={pm} />
  </section>
{/if}



<style>
.summary-title {
  width: calc(100% - 2em);
}

.pm-name {
  font-weight: bolder;
  font-size: 1.5em;
}

.pm-dex {
  margin: 0 .25em;
}

.pm-info {
}

.pm-stats {
  margin-left: auto;
}

.base {
  position: relative;
  text-align: right;
  width: 3em;
  font-family: monospace;
  text-transform: uppercase;
}

.base::after {
  content: attr(data-base);
  padding-left: .5em;
}

.pm-type {
  font-size: 1.5em;
  margin: 0 .25rem;
}
</style>
