<script>
import Moveset from './Moveset.html';
import CP from './CP.html';
import Type from './Type.html';
import Details from './Details.html';

import { calPmCP, calPmWOWCP, copy } from './u.js';
import { dex, pokemon } from './stores.js';

$: pm = $pokemon.find(pm => pm.uid === $dex);

</script>



{#if pm}
  <section class="pm-section L1-box">
    <header class="pm-info card">
      <Details type="head">
        <summary>
          <h2 class="summary-title d-if mb-4 mt-4">
            <span class="pm-name">{pm.name}</span>
            <small class="pm-dex">#{pm.dex}</small>

            <div class="pm-types df">
              {#each pm.types as type}
                <Type klass="pm-type" type={type} />
              {/each}
            </div>

            <div class="pm-stats">
              <div class="base" data-base="a">{pm.baseStats.atk}</div>
              <div class="base" data-base="d">{pm.baseStats.def}</div>
              <div class="base" data-base="s">{pm.baseStats.sta}</div>
            </div>
          </h2>
        </summary>

        <div>
          <CP ads={pm.baseStats} />
        </div>
      </Details>

    </header>

    <Moveset pm={pm} />
  </section>
{/if}



<style>
.summary-title {
  width: calc(100% - 2em);
  font-size: inherit;
}

.pm-name {
  font-weight: bolder;
  font-size: 1.5em;
}

.pm-dex {
  margin: 0 .25em;
}

.pm-stats {
  margin-left: auto;
  font-weight: 100;
  font-size: smaller;
}

.base {
  position: relative;
  text-align: right;
  width: 3em;
  font-family: monospace;
  text-transform: uppercase;
}

.base::after {
  content: attr(data-base);
  padding-left: .5em;
}

:global(.pm-type) {
  font-size: 1.5em;
  margin: 0 .25rem;
}
</style>
