<script>
import Moveset from './Moveset.html';
import CP from './CP.html';
import Type from './Type.html';
import Details from './Details.html';
import Typefactor from './Typefactor.html';

import { calPmCP, calPmWOWCP } from './u.js';

export let pm;

</script>



<section class="pm-section L1-box">
  <header class="pm-info card">
    <Details type="head">
      <summary>
        <h2 class="summary-title d-if mb-4 mt-4">
          <span class="pm-name">{pm.name}</span>
          <small class="pm-dex">#{pm.dex}</small>

          <div class="pm-types df">
            {#each pm.types as type}
              <Type klass="pm-type" type={type} />
            {/each}
          </div>

          <div class="pm-stats">
            <div class="base" data-base="a">{pm.baseStats.atk}</div>
            <div class="base" data-base="d">{pm.baseStats.def}</div>
            <div class="base" data-base="s">{pm.baseStats.sta}</div>
          </div>
        </h2>
      </summary>

      <div>
        <CP ads={pm.baseStats} />

        <div class="text-right mt-4">
          check in PvPoke[tw]:
          <a href={`https://pvpoketw.com/rankings/all/1500/overall/${pm.id}/`} target="pvpoketw1500">超級<sup>1500</sup></a> /
          <a href={`https://pvpoketw.com/rankings/all/2500/overall/${pm.id}/`} target="pvpoketw2500">高級<sup>2500</sup></a> /
          <a href={`https://pvpoketw.com/rankings/all/10000/overall/${pm.id}/`} target="pvpoketw∞">大師<sup>✡</sup></a>
        </div>
      </div>

    </Details>

  </header>

  <Typefactor types={pm.types} />

  <Moveset pm={pm} />
</section>



<style>
.summary-title {
  width: calc(100% - 2em);
  font-size: inherit;
}

.pm-name {
  font-weight: bolder;
  font-size: 1.5em;
}

.pm-dex {
  margin: 0 .25em;
}

.pm-stats {
  margin-left: auto;
  font-weight: 100;
  font-size: smaller;
}

.base {
  position: relative;
  text-align: right;
  width: 3em;
  font-family: monospace;
  text-transform: uppercase;
}

.base::after {
  content: attr(data-base);
  padding-left: .5em;
}

:global(.pm-type) {
  font-size: 1.5em;
  margin: 0 .25rem;
}
</style>
